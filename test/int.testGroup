#!/usr/bin/env rexx

parse source . . s

group = .TestGroup~new(s)
group~add(.int.testGroup)

if group~isAutomatedTest then return group

testResult = group~suite~execute~~print

return testResult

::requires 'ooTest.frm'
::requires 'orxpython.cls'

/*
    Examples: https://docs.python.org/3/library/functions.html#int
*/
::class int.testGroup public subclass ooTestCase
    ::method test_noArguments
        actual = .Python~int
        self~assertSame(0, unbox(actual))

    ::method test_float
        float = .Python~float(123.45)
        actual = .Python~int(float)
        self~assertSame(123, unbox(actual))

    ::method test_string
        actual = .Python~int('123')
        self~assertSame(123, unbox(actual))

    ::method test_string_whitespacesAndUnderscore
        string = .Python~escape('   -12_345\n')
        actual = .Python~int(string)
        self~assertSame(-12345, unbox(actual))

    ::method test_string_base16
        actual = .Python~int('FACE', .Python~int(16))
        self~assertSame(64206, unbox(actual))

    ::method test_string_prefix
        actual = .Python~int('0xface', .Python~int(0))
        self~assertSame(64206, unbox(actual))

    ::method test_string_base2
        actual = .Python~int('01110011', .Python~int(2))
        self~assertSame(115, unbox(actual))
