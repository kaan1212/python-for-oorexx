#!/usr/bin/env rexx

parse source . . s

group = .TestGroup~new(s)
group~add(.urllib.request.testGroup)

if group~isAutomatedTest then return group

testResult = group~suite~execute~~print

return testResult

::requires 'ooTest.frm'
::requires 'orxpython.cls'

/*
    urllib.request â€” Extensible library for opening URLs

    See:
    - https://docs.python.org/3/library/urllib.request.html

    Examples:
    - https://docs.python.org/3/library/urllib.request.html#examples
*/
::class urllib.request.testGroup public subclass ooTestCase
    ::method test_urlopen
        .Python~import('urllib.request')

        f = .Python~urllib.request.urlopen('https://www.oorexx.org/')
        html = f~read(.Python~int(100))~decode('utf-8')

        self~assertTrue(unbox(html~startswith('<!DOCTYPE html')))

    ::method test_Request
        .Python~import('urllib.request')

        req = .Python~urllib.request.Request('https://www.oorexx.org/')
        f = .Python~urllib.request.urlopen(req)
        html = f~read(.Python~int(100))~decode('utf-8')

        self~assertTrue(unbox(html~startswith('<!DOCTYPE html')))
